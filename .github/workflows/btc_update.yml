name: Update current BTC/USD & BTC/KRW in README
permissions:
  contents: write
on:
    schedule:
        - cron: "*/5 * * * *"
    workflow_dispatch:

jobs:
    update-readme:
        runs-on: ubuntu-latest
        steps:
            - name: 리포지토리 체크아웃
              uses: actions/checkout@v4
            
            - name: Python 설치
              uses: actions/setup-python@v5.6.0
              with:
                python-version: 3.11

            - name: pip 설치
              run: |
                pip install requests python-dotenv

            - name: python 파일 실행
              run: |
                python btc_update.py

            - name: 변경내용 push
              run: |
                git config --global user.name "github-actions[bot]"
                git config --global user.email "github-actions[bot]@users.noreply.github.com"
                git add README.md history.txt
                git commit -m "업데이트 완료" || echo "No change"
                git push